# AWS EC2에서 불필요한 데이터 정리하고 용량 확보하기


## ✅ 리눅스 : 용량 부족할때, 커널 삭제로 용량 확보하기
```
bash: Cannot create temp file for here-document: No space left on device
```

용량이 없어서 위와 같은 오류가 발생할 수 있습니다..

이럴때 하드디스크나 SSD 볼륨 용량을 확장하거나, 필요없는 파일을 지우는 방법이 있지만 그전에 리눅스의 오래된 커널이 남아있을 수 있기때문에 용량부족의 원인일 수 있기 때문에 한번 확인해보시는 것이 좋습니다.

확보하는 방법은 참고링크를 따라 수행하면 된다.

[참고](https://falsy.me/ubuntu-%EC%9A%A9%EB%9F%89%EC%9D%B4-%EB%B6%80%EC%A1%B1%ED%95%A0%EB%95%8C-%ED%81%B0-%EC%9A%A9%EB%9F%89%EC%9D%98-%ED%8C%8C%EC%9D%BC-%EC%B0%BE%EA%B8%B0%EC%99%80-%EC%98%A4%EB%9E%98%EB%90%9C-%EC%BB%A4/)

## ✅ 리눅스에서 비정상적으로 용량이 큰 로그(log) 파일 정리하기
  - 리눅스 기반의 컴퓨터를 사용할 때, 가끔 로그(log) 때문에 너무 많은 용량이 소비되는 경우가 있다. 
  - 커널 개발을 할 때 커널 로그를 무분별하게 찍도록 하거나 웹 서버를 운영할 때 주기적으로 커스텀 로그 정보를 남기도록 하는 경우가 대표적인 사례다.

- df 명령어를 이용해 용량을 확인해 보면 뜬금없이 어느 순간에 /dev/xvda1 가 가득 차버리곤 한다. 이럴 때는 du 명령어를 이용해 도대체 어떤 폴더에서 이렇게 많은 용량을 차지하는 것인지 알아낼 필요가 있다. 

```shell
1. 용량을 확인
$ df -hT

2. 다음 명령어로 최상위 아래에 있는 폴더의 용량을 체크할 수 있다.
$ sudo du / -h --max-depth=1
```

삭제하는 방법은 참고링크를 따라 수행하면 된다.

[https://ndb796.tistory.com/518](https://ndb796.tistory.com/518)
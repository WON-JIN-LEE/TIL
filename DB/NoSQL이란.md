# 💻NoSQL이란
![](https://shoark7.github.io/assets/img/knowledge/nosql-data-model.jpg)
## 1. NoSQL
NoSQL이란(Not Only SQL)의 약자로 말 그대도 위에서 설명한 RDB 형태의 관계형 데이터베이스가 아닌 다른 형태의 데이터 저장 기술을 의미하고 있습니다. 또한 NoSQL에서는 RDBMS와는 달리 테이블 간 관계를 정의하지 않습니다. 데이터 테이블은 그냥 하나의 테이블이며 테이블 간의 관계를 정의하지 않아 일반적으로 테이블 간 Join도 불가능합니다. 

NoSQL은 말했다시피 2차원 테이블 간의 관계로 정보를 매핑하는 SQL과는 다르다. NoSQL은 “관계형이지 않은”(여집합) DB를 아우르기 때문에 종류가 매우 다양한데 대표적으로는 연관배열을 사용하는 key-value, 기존의 행 대신 열로 데이터를 저장하는 Column-based, Json이나 XML를 데이터로 삼는 Document-oriented 등이 있다.


### 1.1 NoSQL 나온 이유
NoSQL은 점점 빅데이터의 등장으로 인해 데이터와 트래픽이 기하급수적으로 증가함에 따라 RDBMS에 단점인 성능을 향상시키기 위해서는 장비가 좋아야 하는 Scale-Up의 특징이 비용을 기하급수적으로 증가시키기 때문에 데이터 일관성은 포기하되 비용을 고려하여 여러 대의 데이터에 분산하여 저장하는 Scale-Out을 목표로 등장하였습니다. (ex: mongoDB, Redis 등)

### 1.2 특징
1. **반정형화, 비정형화된 데이터에 적합하다.**
   - SQL은 테이블로 대표되는 정형화된 데이터를 저장하는 데 초점을 맞추고 있다. 그러나 빅데이터 시대 이후로는 다양한 정형화되지 않은 데이터가 뿜어져나왔고 NoSQL은 이를 저장하기에 유용하다. 데이터의 계층 구조를 표현하기 위해 데이터베이스를 트리형으로 구성할 수도 있고 추상화된 그래프로 데이터베이스를 표현할 수도 있다.


2. **“ACID” 대신 “Eventual Consistency”를 허용한다.**
   - 그러나 NoSQL은 분산형의 특성상 정보의 일관성을 유지하기가 어렵다. 수많은 머신에 데이터를 분산저장했는데 한 영역에 Update가 생길 시 그것을 실시간으로 다른 영역에 전파하는 것이 쉽지만은 않기 때문이다. 
   - 반드시 어느 정도의 전파 비용은 수반될 수밖에 없다. 그래서 NoSQL은 Consistency를 조금 타협하고 꼭 실제 최신은 아닐 수 있지만 “업데이트가 되기 전까지는” 가지고 있는 최신의 데이터를 반환한다는 “Eventual Consistency”라는 개념을 사용한다.


3. **대용량의 데이터 저장에 더 유리하다.**
   - 분산형 컴퓨팅에 유리한 NoSQL의 특성상 대용량의 데이터 저장에 매우 용이하다. 클러스터 내에 머신만 추가하면 되기 때문이다.


4. **특정 도메인의 문제해결에 뛰어나다.**
   - SQL은 2차원 테이블에 모든 데이터를 일괄적으로 저장한다. 하지만 NoSQL은 Key-value, Graph 등의 자료형태로 데이터를 저장하는데 이로 인해 특정 도메인에서는 고성능을 낼 수 있다. 
   - 가령 소셜 네트워크를 사업 도메인으로 하는 회사에서 인간 관계는 모두 그래프이기 때문에 그래프 데이터베이스를 사용하면 그래프에 최적화된 API를 사용할 수 있고 데이터베이스 성능도 향상시킬 수 있다.


5. **데이터를 질의하는 API가 다양하다.**
   - 반면 NoSQL은 유형마다, 제품마다 다양한 질의언어가 있을 수 있다. NoSQL의 질의언어를 UnQL(Unstructured Query Language)라고도 하는데 대부분 SQL에 비해 저수준으로, 복잡한 질의가 어렵다. 복잡한 질의가 필요할 때는 데이터의 구조를 마사지하거나, 여러 질의를 중첩하기도 하고 때로는 SQL의 아이디어를 차용하기도 한다.


6. **데이터 모델이 매우 다양하다.**
   - Document-oriented, Graph, Key-value 등 데이터 모델이 다양하다.


## 2. NoSQL의 유형
비관계형 모델을 이용한 데이터 저장 방식
- Wide Column Database 방식(HBase, Hypertable)
- Key-value 방식(Riak, Redis, Voldmort)
- Document 방식(MongoDB, CouchDB)
- Graph 방식(Sones, AllegroGraph)

### 2.1. Column-based

와이드 컬럼 스토어는 **테이블, 행 및 동적 열에 데이터를 저장합니다.**
와이드 컬럼 스토어는 각 행이 동일한 열을 가질 필요가 없다는 점에서 관계형 데이터베이스에 대해 뛰어난 유연성을 제공합니다. 

와이드 컬럼 스토어를 2차원적 키-값 데이터베이스로 생각하는 사람들이 많습니다. **와이드 컬럼 스토어는 대량의 데이터를 저장해야 할 때 적합하며,** **쿼리 패턴을 예측할 수 있습니다.** 와이드 컬럼 스토어는 보통 **사물인터넷 데이터와 사용자 프로필 데이터를 저장하는 데 사용됩니다.** 

대표적인 제품으로는 Cassandra와 HBase는 가장 인기 있는 와이드 컬럼 스토어입니다.

### 2.2. Document-oriented
Document-oriented(이하 “문서 지향”) 유형은 “문서”라는 핵심 개념을 정의한다. 문서 지향 유형은 문서를 포장되고(encapsulated) 인코드된 데이터로 이해한다. 

이때 데이터에 적용가능한 인코딩은 XML, YAML 등이 있는데 요즘은 **JSON 인코딩이 자주 사용된다.** 다시 말해 사용자에게 익숙한 JSON 객체로 문서(레코드)를 구성하는데 이들은 데이터베이스 내에서 자신을 특정하는 unique key를 가지고 있다.

문서 지향에서는 **테이블을 구성하는 기준이 다양하기에 단순한 테이블을 넘어서 다양한 구조로 데이터베이스를 구성할 수 있다는 장점이 있다.** 

예를 들어 어떤 회사의 조직도를 데이터베이스화하기 위해서 각 문서를 디렉토리 계층 구조로 구성해 데이터베이스를 만들 수 있다.

대표적인 제품으로는 MongoDB, IBM Domino, CouchDB 등이 있다.

### 2.3. Key-Value

**Key-value 유형은 연관배열(Associative array)을 데이터 모델로 사용한다.** 연관배열은 map, dict 라는 이름의 자료구조로 주요 언어에서 제공하고 있어 우리에게도 친숙한 개념이다. 이 유형에서 **데이터는 여러 Key, value 쌍을 모은 Collection(또는 테이블)으로 표현되는데 이때 키는 한 collection에서 한 번만 등장할 수 있다.**

대표적인 제품으로는 Oracle NoSQL Database, Apache Ignite, Dynamo 등이 있다.


### 2.4. Graph
 그래프 유형은 노드들의 관계를 표현하는 그래프를 데이터 모델로 하며 질의 언어도 노드(Node)와 에지(Edge) 등 그래프의 개념을 활용한다.

이 유형의 장점은 **데이터들의 관계를 중요시해서** 저장된 데이터들이 에지로 직접 연결될 수 있어 **데이터 질의 시 특정 노드와 관련된 데이터를 한 번의 연산으로 획득(Retrieve) 가능하다는 점이다.**

대표적인 제품으로는 IBM DB2, Neo4j 등이 있다.

___
### Reference
https://www.mongodb.com/ko-kr/nosql-explained
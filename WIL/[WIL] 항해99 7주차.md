# 항해 99 7주 차 회고록

## 📋 What I Do

- JWT 로그인, 회원가입 api
- joi 라이브러리 사용 => ID, PW 조건 적용
- require 공부
- 프론트와 api 연결, 보완 수정
- 유닛 테스트와 통합 테스트 개념 차이점
- JWT 기간 설정 => 15분
- xss 필터 => helmet lib 적용

## 📋 What I Learned and will
- PW 암호화 하기
- 코드 분리
- 테스트 코드 작성

---

## Middleware

## 📌 Middleware

미들웨어 함수는 req(요청) 객체, res(응답) 객체, 그리고 어플리케이션 요청-응답 사이클 도중 그 다음의 미들웨어 함수에 대한 엑세스 권한을 갖는 함수이다.

미들웨어란 간단하게 말하면 클라이언트에게 요청이 오고 그 요청을 보내기 위해 응답하려는 중간(미들)에 목적에 맞게 처리를 하는, 말하자면 거쳐가는 함수들이라고 보면 되겠다.하여 개발할 수 있고 Promise 기반으로 개발되어 비동기 개발에도 수월하게 사용된다.

다음 미들웨어 함수에 대한 엑세스는 next 함수를 이용해서 다음 미들웨어로 현재 요청을 넘길 수 있다.
next라는 말에서 알 수 있듯이 next를 통해 미들웨어는 순차적으로 처리된다. (따라서 순서가 중요하다!!)

## Middleware 유형

1.어플리케이션 레벨 미들웨어:
- app.use() 및 app.METHOD() 함수(*method: get, post 등등)를 이용해 app 오브젝트의 인스턴스에 바인드 시킨다.
미들웨어를 어플리케이션 영역에서 지정한 path대로 처리 가능하게 하도록 한다.

2.라우터 레벨 미들웨어
- 라우터 레벨 미들웨어는 express.Router() 인스턴스에 바인드된다는 점을 제외하면 어플리케이션 레벨 미들웨어와 동일한 방식으로 작동한다.
- 
3.오류 처리 미들웨어
- 에러 핸들링을 하는 미들웨어는 4개의 인자를 사용해서 정의하도록 한다. (err, req, res, next)
- 단순히 에러 핸들링 미들웨어는 에러를 다루기 위한 미들웨어이다.

4.써드파티 미들웨어
- 외부 라이브러리를 이용하여, Express 웹 프레임워크에 기능을 추가하는 것을 말합니다.
---

### 마치며

항해 49일이 지나고 주특기 3주 차를 진행하고 있다. 3주 차에서는 유닛 테스트와 통합테스트 개념과 차이점을 알아본다.
테스트 코드는 테스팅 프레임워크 중에서 jest를 사용하고 있다. 어제 mysqldb가 해킹당했다. 데이터를 잠그고 비트코인을 요구하는 메시지만 남아있었다. DB의 PW, name을 너무 쉽게 작성한 문제가 있었다. 불안하긴 했었는데 연습하는 DB이고 나중에 신경을 쓰면 되겠다지 라는 마음에 뒤로 밀어두고 있었는데 보안 측면에서 심각성을 깨우치는 사건이 되었다.
어떻게 하면 DB 보안을 강화할 수 있는지 공부하고 적용해봐야겠다.




